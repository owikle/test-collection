{% comment %}

    Embed Universal Viewer to load item from an IIIF manifest file, https://github.com/UniversalViewer/universalviewer 
    This include assumes that Item's object_location field is a relative link or direct url to a IIIF manifest json file. e.g. https://wellcomelibrary.org/iiif/b18035723/manifest 
    If you are using an external manifest url, you may encounter CORS policy error if the server hosting the manifest is not set up correctly--one workaround is to download the json file, add to your "objects" folder, and use a relative link, e.g. "objects/book-manifest1.json". You do not need the images, just the manifest file!

{% endcomment %}
<!-- add Mirador assets from CDN -->
<script src="https://unpkg.com/mirador@latest/dist/mirador.min.js"></script>
<!-- add div for viewer -->
<div id="mirador" style="width:1000px;height:550px;position:relative"></div>
<script>
    // initialize Mirador
    var miradorInstance = Mirador.viewer({
        id: "mirador",
        selectedTheme: 'dark',
        window: {
            defaultView: 'individuals', 
            sideBarOpen: false,
            sideBarPanel: "canvas",
            views: [
            { key: "single", behaviors: ["individuals", "paged"] },
            { key: "book", behaviors: ["individuals"] },
            { key: "scroll", behaviors: ["continuous"] },
            { key: "gallery" }
            ]
        },
        windows: [
            { manifestId: {{ page.objectid | prepend: "/objects/iiif/" | append: "/manifest.json" | relative_url | jsonify }} }
        ],
        catalog: [
            { manifestId: {{ page.objectid | prepend: "/objects/iiif/" | append: "/manifest.json" | relative_url | jsonify }} }
        ]
    });
</script>